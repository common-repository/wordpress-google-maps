/*! Google Maps Free - v2.5.4
 * https://wordpress.org/plugins/wordpress-google-maps/
 * Copyright (c) 2015; * Licensed GPLv2+ */
function openMapEditor(){return jQuery(document).trigger("agm_map_editor_open"),!1}function closeMapEditor(){return window.tb_remove(),jQuery(document).trigger("agm_map_editor_close"),!1}(function(i){i(function(){function e(){var e={action:"agm_list_maps"};i.post(window.ajaxurl,e,a)}function a(e){var a="<ul>";i.each(e,function(i,e){a+='<li class="existing_map_item"><div class="map_item_title">'+e.title+" "+"</div>"+'<input type="hidden" value="'+e.id+'" />'+'<div class="map_item_actions">'+'<a href="#" class="add_map_item">'+l10nEditor.use_this_map+"</a>"+"&nbsp;|&nbsp;"+'<a href="#" class="edit_map_item">'+l10nEditor.preview_or_edit+"</a>"+"&nbsp;|&nbsp;"+'<a href="#" class="delete_map_item">'+l10nEditor.delete_map+"</a>"+"</div>"+"</li>"}),a+="</ul>",i("#maps_existing_result").html(a),e.length||i("#maps_new_switch").click()}function t(){var a=i(this).parents("li").find("input:hidden").val();i.post(window.ajaxurl,{action:"agm_delete_map",id:a},function(){e()})}function n(i){return i?' [map id="'+i+'"] ':""}function s(){var e=i(this),a=n(e.parents("li").find("input:hidden").val());return o(a),closeMapEditor(),!1}function o(e){window.tinyMCE&&!i("#content").is(":visible")?window.tinyMCE.execCommand("mceInsertContent",!0,e):d(i("#content").get(0),e)}function d(i,e){if(document.selection&&!window.opera){i.focus();var a=window.opener.document.selection.createRange();a.text=e}else if(i.selectionStart||0===parseInt(i.selectionStart)){var t=i.selectionStart,n=i.selectionEnd;i.value=i.value.substring(0,t)+e+i.value.substring(n,i.value.length)}else i.value+=e}function c(){var e=i(this).parents("li").find("input").val();i.post(window.ajaxurl,{action:"agm_load_map",id:e},function(i){m&&m.destroy(),m=new window.AgmMapHandler("#map_preview_container",i)}),i("#maps_existing").hide(),i("#maps_new").hide()}function _(){i.post(window.ajaxurl,{action:"agm_new_map"},function(e){return"status"in e?"upgrade"===e.status?(i("#map_upgrade_notice").dialog({modal:!0,title:"Please upgrade"}),i("#maps_existing_switch").click(),!1):"defaults"in e?(m&&m.destroy(),m=new window.AgmMapHandler("#map_preview_container",e),void 0):!1:!1}),i("#maps_existing").hide(),i("#maps_new").hide()}function p(){i("li.existing_map_item").each(function(){var e=i(this),a=e.find("input:hidden").val(),t='<div class="map_advanced_checkbox_container"><input type="checkbox" class="map_advanced_checkbox" value="'+a+'" />'+'<div style="clear:both"></div>'+"</div>";e.prepend(t)});var a='<span id="advanced_mode_buttons"><input type="button" class="button-secondary action" id="maps_merge_locations" value="'+l10nEditor.merge_locations+'" />'+'<input type="button" class="button-secondary action" id="maps_batch_delete" value="'+l10nEditor.batch_delete+'" />'+"</span>";i("#maps_advanced_container").append(a),i("#maps_advanced_mode_help_container").html(l10nEditor.advanced_mode_help),i("#maps_advanced_switch").val(l10nEditor.advanced_off),i("#maps_merge_locations").click(function(){var e=[];i("li.existing_map_item .map_advanced_checkbox:checked").each(function(){e[e.length]=i(this).val()}),i.post(window.ajaxurl,{action:"agm_merge_maps",ids:e},function(e){i("#maps_advanced_switch").click(),m&&m.destroy(),m=new window.AgmMapHandler("#map_preview_container",e),i("#maps_existing").hide(),i("#maps_new").hide()})}),i("#maps_batch_delete").click(function(){var a=[];i("li.existing_map_item .map_advanced_checkbox:checked").each(function(){a[a.length]=i(this).val()}),i.post(window.ajaxurl,{action:"agm_batch_delete",ids:a},function(){i("#maps_advanced_switch").click(),e()})})}function l(){i(".map_advanced_checkbox_container").remove(),i("#advanced_mode_buttons").remove(),i("#maps_merge_locations").unbind("click"),i("#maps_batch_delete").unbind("click"),i("#maps_advanced_mode_help_container").html(l10nEditor.advanced_mode_activate_help),i("#maps_advanced_switch").val(l10nEditor.advanced)}var m=!1,r=i("#media-buttons").length?i("#media-buttons"):i("#wp-content-media-buttons");r.length&&(r.append('<a onclick="return openMapEditor();" title="'+l10nEditor.add_map+'" class="thickbox" id="add_map" href="#TB_inline?width=640&height=594&inlineId=map_container">'+'<img onclick="return false;" alt="'+l10nEditor.add_map+'" src="'+window._agm_root_url+'/img/system/globe-button.gif">'+"</a>"),i("body").append('<div id="map_container" style="display:none">'+(window._agm_is_multisite?"":'<p class="agm_less_important">For more detailed instructions on how to use refer to <a target="_blank" href="http://premium.wpmudev.org/project/wordpress-google-maps-plugin/installation/">Google Maps Installation and Use instructions</a>.</p>')+'<a href="#" id="maps_existing_switch">'+l10nEditor.existing_map+"</a>"+'<div id="maps_new_switch_container">'+'<p><input type="button" class="button-secondary action" id="maps_new_switch" value="'+l10nEditor.new_map+'" /></p>'+'<div class="agm_less_important">'+l10nEditor.new_map_intro+"</div>"+"</div>"+'<div class="agm_container" id="maps_existing">'+"<h3>"+l10nEditor.existing_map+"</h3>"+'<div id="maps_existing_result"><img src="'+window._agm_root_url+'/img/system/loading.gif" />'+l10nEditor.loading+"</div>"+'<p id="maps_advanced_container"><input type="button" class="button-secondary action" id="maps_advanced_switch" value="'+l10nEditor.advanced+'" /></p>'+'<p id="maps_advanced_mode_help_container" class="agm_less_important">'+l10nEditor.advanced_mode_activate_help+"</p>"+"</div>"+'<div class="agm_container" id="maps_new">'+"<h3>"+l10nEditor.new_map+"</h3>"+"</div>"+'<div id="map_preview_container"><div id="map_preview"></div></div>'+"</div>"+'<div id="map_upgrade_notice" style="display:none">'+'<div class="error below-h2"><p><a title="Upgrade Now" href="http://premium.wpmudev.org/project/wordpress-google-maps-plugin">Upgrade to Google Maps Pro to enable additional features</a></p></div>'+l10nEditor.please_upgrade+"</div>"),i("#maps_existing_switch").click(function(){m&&m.destroy(),i("#maps_existing_switch").hide(),i("#maps_new").hide(),i("#maps_existing").show(),i("#maps_new_switch_container").show(),i.browser.webkit&&i("#map_preview_container").css("height",0).css("width",0),e()}),i("#maps_new_switch").click(function(){m&&m.destroy(),i("#maps_new_switch_container").hide(),i("#maps_existing").hide(),i("#maps_new").show(),i("#maps_existing_switch").show(),i.browser.webkit&&i("#map_preview_container").css("height",0).css("width",0),_()}),i(document).bind("agm_map_editor_open",function(){i("#maps_existing_switch").click()}),i("li.existing_map_item a.add_map_item").live("click",s),i("li.existing_map_item a.edit_map_item").live("click",c),i("li.existing_map_item a.delete_map_item").live("click",t),i("#map_preview_container").bind("agm_map_close",function(){i("#maps_existing_switch").click()}),i("#map_preview_container").bind("agm_map_insert",function(i,e){var a=n(e);o(a),closeMapEditor()}),i("#maps_advanced_switch").toggle(p,l),i("li.existing_map_item").live("mouseover",function(){i(this).addClass("agm_active_item")}).live("mouseout",function(){i(this).removeClass("agm_active_item")}))})})(jQuery);