/*! Google Maps Free - v2.5.4
 * https://wordpress.org/plugins/wordpress-google-maps/
 * Copyright (c) 2015; * Licensed GPLv2+ */
var AgmMapHandler;(function(t){t(function(){function e(){window._agmMapIsLoaded?t.each(_agmMaps,function(t,e){new AgmMapHandler(e.selector,e.data)}):window.setTimeout(e,100)}AgmMapHandler=function(e,a){var n,o,s,r,l,c,m="map_"+Math.floor(Math.random()*(new Date).getTime())+"_preview",d=t(e),p=[],h=!1,_=function(){return t(e+" .agm_mh_directions_container").remove(),!1},g=function(){var t='<div class="agm_mh_directions_container agm_mh_container">';t+='<div style="width:300px"><span style="float:right"><input type="button" class="agm_mh_close_directions" value="'+l10nStrings.close+'" /> </span>'+"<div>"+'<a href="#" class="agm_mh_travel_type"><img src="'+window._agm_root_url+'/img/system/car_on.png"></a>'+'<a href="#" class="agm_mh_travel_type"><img src="'+window._agm_root_url+'/img/system/bike_off.png"></a>'+'<a href="#" class="agm_mh_travel_type"><img src="'+window._agm_root_url+'/img/system/walk_off.png"></a>'+"</div>"+"</div>"+"<div>"+'<img src="'+window._agm_root_url+'/img/system/a.png">'+"&nbsp;"+'<input size="32" type="text" class="agm_waypoint_a" />'+"</div>"+'<div><a href="#" class="agm_mh_swap_direction_waypoints"><img src="'+window._agm_root_url+'/img/system/swap.png"></a></div>'+"<div>"+'<img src="'+window._agm_root_url+'/img/system/b.png">'+"&nbsp;"+'<input size="32" type="text"  class="agm_waypoint_b" />'+"</div>"+"<div>"+'<input type="button" class="agm_mh_get_directions" value="'+l10nStrings.get_directions+'" />'+"</div>"+'<div class="agm_mh_directions_panel agm_mh_container">'+"</div>",t+="</div>",d.append(t)},u=function(){if(a.show_panoramio_overlay&&parseInt(a.show_panoramio_overlay)){var t=a.panoramio_overlay_tag;h=new google.maps.panoramio.PanoramioLayer,t&&h.setTag(t),h.setMap(n)}},f=function(){var i=t(this),a=i.find("img"),n=t(e+" .agm_mh_travel_type img");return n.each(function(){t(this).attr("src",t(this).attr("src").replace(/_on\./,"_off."))}),a.attr("src").match(/car_off\.png/)?l=google.maps.DirectionsTravelMode.DRIVING:a.attr("src").match(/bike_off\.png/)?l=google.maps.DirectionsTravelMode.BICYCLING:a.attr("src").match(/walk_off\.png/)&&(l=google.maps.DirectionsTravelMode.WALKING),a.attr("src",a.attr("src").replace(/_off\./,"_on.")),!1},v=function(){t(e+" .agm_mh_directions_container").is(":visible")||g();var i=I(t(this).attr("href")),a=p[i],n=new google.maps.Geocoder;return n.geocode({latLng:a.getPosition()},function(i,a){a===google.maps.GeocoderStatus.OK?t(e+" .agm_waypoint_a").val(i[0].formatted_address):window.alert(l10nStrings.geocoding_error)}),!1},w=function(){var i=t(e+" .agm_waypoint_a").val();return t(e+" .agm_waypoint_a").val(t(e+" .agm_waypoint_b").val()),t(e+" .agm_waypoint_b").val(i),!1},y=function(){var i=t(e+" .agm_waypoint_a").val(),n=t(e+" .agm_waypoint_b").val();if(!i||!n)return window.alert(l10nStrings.missing_waypoint),!1;var r={origin:i,destination:n,unitSystem:a.defaults.units,travelMode:l};return o.setPanel(t(e+" .agm_mh_directions_panel").get(0)),s.route(r,function(t,e){e===google.maps.DirectionsStatus.OK?o.setDirections(t):window.alert(l10nStrings.oops_no_directions)}),!1},b=function(){var e=!1;t.each(p,function(t,i){if(!e)return e=i,!0;var a={origin:e.getPosition(),destination:i.getPosition(),travelMode:google.maps.DirectionsTravelMode.DRIVING},o=new google.maps.DirectionsRenderer({draggable:!0}),s=new google.maps.DirectionsService;o.setMap(n),s.route(a,function(t,e){e===google.maps.DirectionsStatus.OK&&o.setDirections(t)}),e=i})},x=function(t,e,i,a){var o=p.length;n.setCenter(e);var s=new google.maps.Marker({title:t,map:n,icon:window._agm_root_url+"/img/"+a,draggable:!1,clickable:!0,position:e}),r='<div class="agm_mh_info_content"><div class="agm_mh_info_title">'+t+"</div>"+'<img class="agm_mh_info_icon" src="'+window._agm_root_url+"/img/"+a+'" />'+'<div class="agm_mh_info_body">'+i+"</div>"+T(o)+C(o,1)+"</div>",l=new google.maps.InfoWindow({content:r});google.maps.event.addListener(s,"click",function(){l.open(n,s)}),s._agmBody=i,s._agmInfo=l,p[o]=s,M()},k=function(){a.markers&&t.each(a.markers,function(t,e){x(e.title,new google.maps.LatLng(e.position[0],e.position[1]),e.body,e.icon)})},I=function(t){var e=t.replace(/[^0-9]+/,"");return parseInt(e)},S=function(){var e=t(this),i=I(e.attr("href")),o=p[i];if(n.setCenter(o.getPosition()),parseInt(a.street_view)){var s=n.getStreetView();s.setPosition(n.getCenter()),s.setVisible(!0)}return!1},T=function(t){return'<a href="#agm_mh_marker-'+t+'" class="agm_mh_marker_item_directions">'+l10nStrings.directions+"</a>"},C=function(t){return"show_posts"in a&&a.show_posts&&parseInt(a.show_posts)?'<div class="agm_post_links_container"><input type="hidden" value="'+t+'" /></div>':""},M=function(){if(!a.show_markers||!parseInt(a.show_markers))return!1;var e='<ul class="agm_mh_marker_list">';t.each(p,function(t,i){e+='<li style="clear:both"><a href="#agm_mh_marker-'+t+'" class="agm_mh_marker_item">'+'<img src="'+i.getIcon()+'" />'+'<div class="agm_mh_marker_item_content">'+"<div><b>"+i.getTitle()+"</b></div>"+"<div>"+i._agmBody+"</div>"+"</div>"+"</a>"+T(t)+C(t)+'<div style="clear:both"></div>'+"</li>"}),e+="</ul>",t("#agm_mh_markers_"+m).html(e)},E=function(){return"show_posts"in a&&a.show_posts&&parseInt(a.show_posts)?(t(e+" .agm_post_links_container").each(function(){var e=t(this),i=e.find("input:hidden").val();if(!i)return!0;var n=a.markers[i];if(!n)return!0;var o=!1;return(o="post_ids"in n&&n.post_ids&&n.post_ids.length?n.post_ids:a.post_ids)?(t.post(window._agm_ajax_url,{action:"agm_get_post_titles",post_ids:o},function(a){if(!a.posts)return!0;var n='<div class="agm_associated_posts_list_title">'+l10nStrings.posts+"</div>";n+='<ul class="agm_associated_posts_list_items">';var o="";t.each(a.posts,function(t,e){t>2&&(o='style="display:none;"'),n+="<li "+o+'><a href="'+e.permalink+'">'+e.post_title+"</a></li>"}),n+="</ul>",o&&(n+='<a href="#" class="agm_toggle_hidden_post_links">'+l10nStrings.showAll+"</a>"),e.html(n);var s=p[i],r=t(s._agmInfo.getContent());r.find(".agm_post_links_container").html(n);var l='<div class="agm_mh_info_content">'+r.html()+"</div>";s._agmInfo.setContent(l),t(".agm_toggle_hidden_post_links").live("click",function(){var e=t(this).parents(".agm_post_links_container").first();return e.find(".agm_associated_posts_list_items li:hidden").length?(e.find(".agm_associated_posts_list_items li:hidden").show(),t(this).text(l10nStrings.hide)):(e.find(".agm_associated_posts_list_items li:gt(2)").hide(),t(this).text(l10nStrings.showAll)),!1})}),void 0):!0}),void 0):!1},z=function(){var p,h;try{p=parseInt(a.width)>0?a.width:a.defaults.width,h=parseInt(a.height)>0?a.height:a.defaults.height}catch(g){p=parseInt(a.width)>0?a.width:200,h=parseInt(a.height)>0?a.height:200}p=(""+p).indexOf("%")?p:parseInt(p);try{a.defaults.units="units"in a.defaults?google.maps.UnitSystem[a.defaults.units]:google.maps.UnitSystem.METRIC}catch(g){a.defaults.units=google.maps.UnitSystem.METRIC}if(a.zoom=parseInt(a.zoom)?parseInt(a.zoom):1,a.map_type=a.map_type?a.map_type:"ROADMAP",a.map_alignment=a.map_alignment||a.defaults.map_alignment,a.image_size=a.image_size||a.defaults.image_size,a.image_limit=a.image_limit||a.defaults.image_limit,a.show_panoramio_overlay="show_panoramio_overlay"in a?a.show_panoramio_overlay:0,a.panoramio_overlay_tag="panoramio_overlay_tag"in a?a.panoramio_overlay_tag:"",a.street_view="street_view"in a?a.street_view:0,d.wrap('<div id="map_'+m+'_alignment_container"></div>'),c=t("#map_"+m+"_alignment_container"),d.html('<div id="'+m+'"></div>'),t("#"+m).width(p).height(parseInt(h)),d.width(p),a.show_map&&parseInt(a.show_map)||t("#"+m).css({position:"absolute",left:"-120000px"}),n=new google.maps.Map(t("#"+m).get(0),{zoom:parseInt(a.zoom),center:new google.maps.LatLng(40.7171,-74.0039),mapTypeId:google.maps.MapTypeId[a.map_type]}),o=new google.maps.DirectionsRenderer({draggable:!0}),s=new google.maps.DirectionsService,o.setMap(n),l=google.maps.DirectionsTravelMode.DRIVING,d.append('<div id="agm_mh_footer"><div class="agm_mh_container" id="agm_mh_markers_'+m+'">'+"</div>"+"</div>"),"show_links"in a&&parseInt(a.show_links)&&d.append('<div class="agm_upgrade_link"><small><a href="http://premium.wpmudev.org/project/wordpress-google-maps-plugin">Created by the WordPress Google Maps plugin</a></small></div>'),k(),u(),E(),parseInt(a.street_view)){var x=n.getStreetView(),I=a.street_view_pos?new google.maps.LatLng(a.street_view_pos[0],a.street_view_pos[1]):n.getCenter();x.setPosition(I),a.street_view_pov&&x.setPov({heading:parseInt(a.street_view_pov.heading),pitch:parseInt(a.street_view_pov.pitch),zoom:parseInt(a.street_view_pov.zoom)}),x.setVisible(!0)}a.show_images&&parseInt(a.show_images)&&(r=new i(n,d,a.image_limit,a.image_size),d.append(r.createMarkup()));var T=!1;try{a.plot_routes&&(T=!0)}catch(g){}switch(T&&b(),a.map_alignment){case"right":d.css({"float":"right"});break;case"center":d.css({margin:"0 auto"});break;case"left":d.css({"float":"left"});break;default:d.css({"float":"left"})}c.append('<div style="clear:both"></div>'),t(e+" .agm_mh_travel_type").live("click",f),t(e+" .agm_mh_swap_direction_waypoints").live("click",w),t(e+" .agm_mh_close_directions").live("click",_),t(e+" .agm_mh_get_directions").live("click",y),t(e+" .agm_mh_marker_item").live("click",S),t(e+" .agm_mh_marker_item_directions").live("click",v)};z()};var i=function(e,i,a,n){var o="agm_panoramio_"+Math.floor(Math.random()*(new Date).getTime())+"_container",s=[],r=200,l=function(){var t=e.getBounds();if(!t)return window.setTimeout(l,100);var i="func_"+o+"_image_handler";window[i]=function(t){s=t.photos};var r=document.createElement("script"),c="http://www.panoramio.com/map/get_panoramas.php?set=full&from=0&to="+a+"&miny="+t.getSouthWest().lat()+"&minx="+t.getSouthWest().lng()+"&maxy="+t.getNorthEast().lat()+"&maxx="+t.getNorthEast().lng()+"&size="+n+"&callback="+i;r.type="text/javascript",r.src=c,document.body.appendChild(r)},c=function(){if(window.Galleria&&"function"==typeof window.Galleria)return!0;var t=document.createElement("script"),e=window._agm_root_url+"/js/external/galleria/galleria-1.2.2.min.js";t.type="text/javascript",t.src=e,document.body.appendChild(t)},m=function(){if(window.Galleria&&"function"==typeof window.Galleria){if(window.Galleria&&window.Galleria.theme)return!0;var t=document.createElement("script"),e=window._agm_root_url+"/js/external/galleria/themes/classic/galleria.classic.min.js";t.type="text/javascript",t.src=e,document.body.appendChild(t),p()}else window.setTimeout(m,300)},d=function(){s.length?m():window.setTimeout(d,1e3)},p=function(){if(window.Galleria&&window.Galleria.theme&&"function"==typeof window.Galleria&&"function"==typeof t("#"+o+" div.agm_panoramio_image_list_container").galleria){_();var e=r?r:200;t("#"+o+" div.agm_panoramio_image_list_container").galleria({width:i.width(),height:e})}else window.setTimeout(p,300)},h=function(){return'<div class="agm_panoramio_container" id="'+o+'">'+"</div>"},_=function(){if(!t("#"+o).length)return!1;var e='<div class="agm_panoramio_image_list_container"><ul class="agm_panoramio_image_list">',i=0;t.each(s,function(t,a){var n=parseInt(a.height);r=n>r?n:r,e+='<li><img src="'+a.photo_file_url+'" title="'+a.photo_title+'" />'+"</li>",i+=a.width}),e+="</ul></div>",t("#"+o).html(e)},g=function(){l(),c(),d()};return g(),{createMarkup:h}};e()})})(jQuery);